import { useEffect, useState } from "react";

const tips = [
  {
    question: "حاسس إنك تايه في النحو؟",
    answer: "ما تقلقش... إحنا ماشيين على خطة واضحة. من أول القواعد الأساسية... لحد أصعب المسائل الإعرابية."
  },
  {
    question: "حاسس إنك لوحدك؟",
    answer: "فيه متابعة مستمرة ورد على أسئلتك أول بأول. كل سؤال تقف فيه... هتلاقيني معاك لحد ما توصله بنفسك."
  },
  {
    question: "القواعد كتير؟",
    answer: "مش بنحفظ قواعد وخلاص! هنفهم كل قاعدة جاية منين، ونطبقها في الجمل. لما تفهم، الضغط هيروح."
  }
];

const TipsSection = () => {
  const [drawProgress, setDrawProgress] = useState(0);
  const [isDrawing, setIsDrawing] = useState(true);

  useEffect(() => {
    const interval = setInterval(() => {
      setDrawProgress(prev => {
        if (isDrawing) {
          if (prev >= 100) {
            setTimeout(() => setIsDrawing(false), 1000);
            return 100;
          }
          return prev + 0.5;
        } else {
          if (prev <= 0) {
            setTimeout(() => setIsDrawing(true), 500);
            return 0;
          }
          return prev - 0.5;
        }
      });
    }, 20);

    return () => clearInterval(interval);
  }, [isDrawing]);

  const strokeDashoffset = 4250.04 - (drawProgress * 42.5);

  return (
    <section className="py-20 bg-primary relative overflow-hidden">
      <div className="container mx-auto px-4">
        <div className="flex flex-col-reverse lg:flex-row-reverse items-center gap-12">
          {/* Tips Cards */}
          <div className="flex-1 space-y-6">
            {/* Main Card */}
            <div className="bg-primary/40 backdrop-blur-sm border border-secondary/20 rounded-2xl p-8 relative">
              <div className="absolute -top-4 right-8 bg-secondary/20 p-2 rounded-lg">
                <div className="grid grid-cols-2 gap-1">
                  <div className="w-2 h-2 bg-secondary rounded-sm"></div>
                  <div className="w-2 h-2 bg-secondary rounded-sm"></div>
                  <div className="w-2 h-2 bg-secondary rounded-sm"></div>
                  <div className="w-2 h-2 bg-secondary rounded-sm"></div>
                </div>
              </div>
              <h3 className="text-xl font-bold text-primary-foreground mb-3 text-center">
                {tips[0].question}
              </h3>
              <p className="text-primary-foreground/80 text-center leading-relaxed">
                {tips[0].answer}
              </p>
            </div>

            {/* Two Cards Row */}
            <div className="grid md:grid-cols-2 gap-6">
              {tips.slice(1).map((tip, index) => (
                <div 
                  key={index}
                  className="bg-primary/40 backdrop-blur-sm border border-secondary/20 rounded-2xl p-6 relative hover:border-secondary/40 transition-all duration-300"
                >
                  <div className="absolute -top-4 right-6 bg-secondary/20 p-2 rounded-lg">
                    <div className="grid grid-cols-2 gap-1">
                      <div className="w-2 h-2 bg-secondary rounded-sm"></div>
                      <div className="w-2 h-2 bg-secondary rounded-sm"></div>
                      <div className="w-2 h-2 bg-secondary rounded-sm"></div>
                      <div className="w-2 h-2 bg-secondary rounded-sm"></div>
                    </div>
                  </div>
                  <h3 className="text-lg font-bold text-primary-foreground mb-2 text-center">
                    {tip.question}
                  </h3>
                  <p className="text-primary-foreground/80 text-sm text-center leading-relaxed">
                    {tip.answer}
                  </p>
                </div>
              ))}
            </div>
          </div>

          {/* Right Side - Title and Student SVG */}
          <div className="flex-1 flex flex-col items-center lg:items-end gap-8">
            {/* Title */}
            <div className="text-center lg:text-right relative lg:pl-12">
              <div className="absolute -right-4 top-0 bottom-0 w-1 bg-secondary rounded-full hidden lg:block"></div>
              <h2 className="text-3xl md:text-4xl lg:text-5xl font-bold text-primary-foreground leading-tight">
                خليك دايمًا سابق
              </h2>
              <h2 className="text-3xl md:text-4xl lg:text-5xl font-bold text-secondary leading-tight">
                بخطوة عن
              </h2>
              <h2 className="text-3xl md:text-4xl lg:text-5xl font-bold text-primary-foreground leading-tight">
                الامتحان.
              </h2>
            </div>

            {/* Detailed Student SVG */}
            <div className="relative w-full max-w-2xl hover:drop-shadow-[0_0_20px_rgba(255,200,87,0.4)] transition-all duration-300">
              <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="100%" 
                height="auto" 
                viewBox="0 0 581 282" 
                fill="none" 
                className="path-drawing hover:brightness-110 transition-all duration-300"
              >
                <path 
                  d="M1 277.59C91.1721 277.813 178.281 278.036 268.836 277.589C269.142 268.126 269.448 258.663 269.753 249.2C275.91 253.906 282.792 257.661 290.081 260.293C293.788 252.214 297.494 244.134 301.201 236.055C309.534 242.065 308.568 257.415 318.314 260.671C321.767 261.824 325.537 260.93 329.039 259.936C340.705 256.627 352.072 252.269 362.891 245.393C358.897 227.345 356.808 208.877 355.855 190.571C343.803 193.512 333.438 191.938 319.339 191.9C313.751 192.747 306.12 196.656 300.532 197.502C299.162 197.71 297.592 197.863 296.551 196.949C295.613 196.124 295.461 194.724 294.761 193.69C294.045 192.63 292.791 192.008 292.137 190.908C291.468 189.782 291.552 188.38 291.657 187.075C291.786 185.464 291.916 183.854 292.045 182.244C290.538 180.064 290.522 176.958 292.007 174.764C293.491 172.569 296.38 171.426 300.302 170.569C297.514 169.65 295.003 167.907 293.168 165.617C292.278 164.507 291.532 162.945 292.255 161.72C293.103 160.283 295.314 160.476 296.714 161.384C298.114 162.292 299.187 163.7 300.723 164.352C302.813 165.239 305.197 164.52 307.468 164.537C311.646 164.569 315.657 167.427 317.666 170.822C318.396 172.449 320.19 173.391 321.962 173.594C323.735 173.797 325.513 173.386 327.25 172.977C335.21 171.106 343.17 169.235 351.04 167.559C355.377 175.496 357.46 184.646 356.987 193.676C359.776 196.527 364.789 196.267 367.895 193.765C371.001 191.264 372.376 187.095 372.407 183.108C372.439 179.121 371.299 175.229 370.169 171.405C369.073 167.692 367.533 163.487 363.893 162.166C359.372 160.526 354.922 164.304 350.595 166.402C355.379 165.887 358.501 171.262 359.816 175.888C361.131 180.515 362.67 186.069 367.265 187.495C371.438 188.789 375.62 185.813 378.98 183.021C384.373 178.539 390.165 173.345 390.924 166.376C391.505 161.034 388.943 155.906 386.435 151.153C378.095 135.353 369.52 119.676 360.442 103.844C357.509 101.943 354.229 100.58 350.813 99.8401C348.325 107.373 346.493 115.121 345.046 122.794C347.197 122.978 349.347 123.163 351.498 123.348C351.571 138.445 351.645 153.542 351.755 169.182C343.42 170.916 335.085 172.65 326.75 174.383C324.46 174.859 321.973 175.315 319.867 174.298C317.676 173.24 316.489 170.882 314.851 169.083C310.027 163.785 301.852 163.734 294.864 163.565C293.263 162.193 291.663 160.821 290.062 159.449C289.276 148.594 288.489 137.739 287.703 126.884C306.215 123.893 324.957 122.324 343.709 122.196C339.411 122.281 335.113 122.366 330.815 122.451C331.234 114.746 331.789 106.619 336.102 100.221C337.621 97.9684 339.64 95.9618 342.167 94.9633C344.694 93.9647 347.774 94.1217 349.905 95.8061C351.051 96.7115 351.821 98.5748 350.736 99.5519C349.914 100.292 348.629 99.9808 347.581 99.6266C341.782 97.667 335.983 95.7074 330.222 93.5642C328.129 91.5706 326.035 89.5771 323.941 87.5835C318.026 93.4218 312.111 99.2602 306.197 105.098C311.394 106.862 316.04 110.212 319.356 114.584C321.999 109.677 324.511 104.699 326.887 99.6576C327.715 97.9012 328.547 95.9814 328.15 94.0807C327.667 91.7669 325.552 90.2341 324.001 88.4492C322.451 86.6642 320.496 81.6258 321.729 80.0064C325.515 72.177 329.302 64.3474 333.088 56.5179C334.087 54.4528 335.408 52.1346 337.672 51.7594C339.84 51.3999 341.944 53.1966 342.522 55.3168C343.1 57.4369 342.463 59.715 341.453 61.667C338.754 66.8842 333.242 70.5349 327.384 70.9856C328.336 63.0602 333.319 56.3139 337.388 49.4459C341.458 42.5778 344.804 34.307 341.807 26.5577C341.483 18.5869 335.718 11.6288 328.747 7.74545C321.776 3.86205 313.708 2.52716 305.802 1.43849C302.865 1.03395 299.818 0.662275 296.98 1.52086C294.141 2.37945 291.559 4.81424 289.624 8.33638C280.793 14.5406 275.853 25.8577 277.309 36.5493C278.487 45.1988 283.451 53.9007 280.618 62.1577C274.617 60.8406 269.742 55.4477 269.037 49.3474C268.774 47.0678 269.1 44.6015 270.54 42.8151C271.981 41.0286 274.737 40.2054 276.74 41.6678C278.211 45.1232 279.682 48.5787 281.153 52.0341C284.543 47.4274 279.567 40.4858 282.034 35.3253C282.998 33.3083 284.978 31.9083 285.9 29.8715C286.973 27.4988 286.423 24.7412 286.728 22.1549C287.033 19.5688 289.029 16.6725 291.579 17.2055C293.783 17.6662 294.657 20.2388 295.764 22.1983C298.393 26.8505 304.52 29.1841 309.579 27.4605C308.861 25.2467 307.045 23.4188 304.836 22.6862C306.946 28.3859 313.576 31.9996 319.512 30.6867C318.832 28.7846 317.293 27.2081 315.408 26.4811C319.002 31.0773 325.002 33.6772 331.436 34.0494C334.674 46.2913 332.457 59.87 325.492 70.447C316.063 84.7666 303.163 88.3594 296.634 85.0771C290.884 82.1865 285.713 73.9421 282.721 67.0819C283.351 67.1683 283.981 67.2548 284.611 67.3412C285.791 73.2715 289.161 78.7408 293.927 82.4642C295.454 83.6577 297.216 84.803 297.85 86.6348C298.737 89.2009 297.049 91.878 295.822 94.6566C296.055 99.5863 296.288 104.516 296.521 109.446C294.408 107.794 292.295 106.142 290.182 104.49C289.688 104.104 289.104 103.694 288.489 103.822C288.015 103.92 287.668 104.315 287.357 104.687C285.685 106.689 284.013 108.691 282.341 110.694C282.73 101.228 288.676 92.1954 297.218 88.0934C296.859 92.4508 294.947 96.5842 294.736 100.951C294.481 106.261 296.747 111.329 298.336 116.221C300.143 119.16 300.954 122.698 300.608 126.13C297.214 126.773 293.82 127.415 290.426 128.058C290.969 144.325 292.56 160.536 294.149 176.734C294.454 179.835 294.758 182.936 295.062 186.037C295.385 189.321 295.943 193.027 298.651 194.914C297.43 195.533 296.21 196.153 294.989 196.772C296.353 206.621 295.674 206.263 297.353 216.671C315.962 214.693 334.571 212.716 353.18 210.738C352.452 204.027 351.724 197.316 350.997 190.605C348.904 191.171 346.811 191.737 344.718 192.303C347.167 198.188 343.221 205.169 337.657 208.281C332.093 211.394 325.424 211.611 319.049 211.693C312.673 211.775 306.028 211.86 301.183 214.485C302.637 229.805 296.966 245.654 286.121 256.577C280.697 253.353 275.274 250.13 269.85 246.906C268.824 246.296 267.752 245.64 267.175 244.595C266.444 243.271 266.677 241.646 266.931 240.155C269.297 226.226 271.663 212.297 274.683 196.987C277.624 168.631 278.403 140.051 277.013 111.577C276.961 110.529 276.857 109.369 276.087 108.656C274.512 107.198 272.037 108.889 270.756 110.612C261.38 123.233 262.362 140.481 263.763 156.139C264.084 159.725 264.486 163.527 266.683 166.381C268.88 169.235 273.55 170.487 276.098 167.942C277.04 174.298 277.192 180.77 276.55 187.163C276.305 189.604 274.597 192.848 272.377 191.803C271.106 191.204 270.849 189.541 270.76 188.139C270.348 181.648 269.936 175.157 270.98 167.881C275.518 165.002 276.259 158.791 276.419 153.421C276.668 145.081 276.636 136.733 276.324 128.395C276.247 126.339 275.97 123.954 274.225 122.865C272.509 121.793 270.128 122.622 268.8 124.148C267.472 125.675 266.926 127.708 266.368 129.652C263.173 140.784 258.319 151.439 251.607 162.326C257.6 163.673 262.83 168.046 265.216 173.704C267.984 180.269 266.948 184.675 265.865 191.717C265.543 193.812 265.028 196.197 263.17 197.219C261.411 198.187 260.258 203.614 258.394 202.868C255.041 201.526 247.647 199.054 244.388 197.497C242.709 196.695 237.915 187.646 236.805 186.152C233.335 181.486 247.628 189.742 250.51 191.461C252.581 192.697 254.743 194.346 257.124 193.958C260.108 193.471 260.591 186.008 261.13 183.033C261.775 179.466 261.764 175.669 260.301 172.352C258.838 169.035 255.714 166.305 249.483 167.268C224.363 158.933 198.618 152.479 172.536 147.979C172.425 149.813 172.313 151.647 172.202 153.482C201.428 158.368 230.259 165.62 258.697 175.3C260.746 175.911 262.795 176.523 264.844 177.135C264.955 175.835 265.065 174.535 265.175 173.234C253.425 169.51 241.674 165.785 229.923 162.06C229.807 163.239 229.69 164.417 229.574 165.595L229.152 165.549C229.152 165.549 229.476 165.711 229.476 166.036C223.831 164.457 224.607 164.974 222.003 167.802C223.937 163.755 222.697 155.462 220.954 153.273C218.724 150.472 216.526 169.384 217.62 165.975C219.547 159.976 221.844 152.963 219.143 150.102C216.98 147.809 213.798 153.309 213.049 156.37C212.299 159.432 215.22 162.274 211.901 164.65C207.392 167.878 219.234 151.983 214.335 149.384C209.463 146.8 205.255 167.751 207.248 162.61C209.635 156.451 211.907 152.342 207.999 150C204.766 148.063 202.736 155.169 201.497 158.728C200.816 160.683 200.126 162.701 200.245 164.767C200.506 169.333 195.667 162.421 195.667 162.421C195.667 162.421 193.189 159.28 194.278 157.949C195.295 156.703 197.472 157.468 198.873 158.949C202.98 160.772 202.396 167.333 206.01 170.003C207.71 171.26 210.002 171.374 211.866 172.372C214.027 173.53 215.776 175.908 218.225 175.776C219.795 175.692 221.105 174.54 222.047 173.282C222.99 172.024 225.554 169.976 226.687 168.887C229.018 166.644 231.155 166.991 233.536 168.367C240.65 169.659 247.676 171.432 254.55 173.671C256.173 174.199 257.932 174.869 258.758 176.363C259.948 178.515 258.632 181.145 258.595 183.604C258.573 185.111 259.045 186.58 259.181 188.081C259.317 189.582 259.023 191.273 257.831 192.196C256.442 193.27 253.233 191.257 251.536 190.804C237.774 187.132 236.025 184.516 224.239 177.998C223.049 177.397 220.634 176.387 219.487 175.46C220.133 174.054 221.839 173.39 223.383 173.495C224.927 173.6 226.355 174.315 227.734 175.016C234.342 178.375 240.949 181.735 247.556 185.094C250.419 186.55 253.406 188.112 255.201 190.775C256.105 192.117 256.665 193.687 257.714 194.919C260.57 198.271 265.746 197.958 271.033 198.159C275.842 212.056 268.714 228.528 275.418 241.618C277.303 245.299 281.005 248.731 285.073 247.979C291.961 246.707 292.31 235.862 298.562 232.703C303.568 230.174 309.301 233.792 314.149 236.612C327.552 244.407 344.046 246.709 359.937 243.678C358.299 250.987 365.16 258.346 372.636 258.858C380.112 259.371 387.165 254.433 391.068 248.039C394.97 241.644 396.244 234.01 396.899 226.548C397.524 219.44 397.658 212.289 397.3 205.162C397.15 202.159 396.802 198.9 394.727 196.723C391.982 193.844 387.422 194.002 383.461 194.369C377.397 194.932 370.433 196.032 367.302 201.254C365.489 204.28 365.45 208.007 365.463 211.534C365.494 219.816 365.526 228.098 365.557 236.38C365.571 239.908 365.594 243.503 366.68 246.861C367.766 250.218 370.104 253.362 373.442 254.51C377.23 255.814 381.561 254.254 384.467 251.497C387.373 248.74 389.09 244.971 390.44 241.2C394.563 229.686 395.883 217.179 394.255 205.058C392.683 193.349 388.406 181.779 389.767 170.044C390.503 163.698 392.885 157.458 392.229 151.103C391.572 144.748 386.074 138.125 379.193 139.804C375.503 134.014 371.813 128.224 368.124 122.434C366.903 120.519 365.406 118.417 363.156 118.1C359.423 117.572 357.166 122.071 356.369 125.754C354.795 133.028 354.173 140.507 354.523 147.94C354.636 150.336 354.922 152.908 356.503 154.712C359.453 158.076 364.806 156.931 369.188 156.024C373.57 155.117 383.953 157.105 380.584 160.049C376.855 163.307 361.45 162.211 366.36 161.554C371.42 160.877 380.975 161.174 378.886 165.353C377.319 168.487 371.876 165.392 368.371 165.412C369.561 169.157 370.762 172.967 370.819 176.896C370.876 180.824 369.623 184.959 366.631 187.508C364.631 189.212 362.016 190.092 360.09 191.879C356.859 194.879 356.249 199.711 356.126 204.117C355.75 217.64 358.077 231.075 360.396 244.404C360.545 245.258 360.694 246.113 360.842 246.967C362.549 256.772 363.233 268.619 367.052 279.359C413.209 279.359 597.617 283.386 601 278.823" 
                  stroke="hsl(40 75% 55%)" 
                  fill="none" 
                  className="animated-path" 
                  style={{strokeDasharray: 4250.04, strokeDashoffset}}
                />
              </svg>
            </div>
          </div>
        </div>
      </div>

      {/* Background decorations */}
      <div className="absolute top-10 left-10 w-20 h-20 border border-secondary/10 rounded-full animate-pulse"></div>
      <div className="absolute bottom-20 right-20 w-32 h-32 border border-secondary/10 rounded-full animate-pulse delay-300"></div>
    </section>
  );
};

export default TipsSection;
